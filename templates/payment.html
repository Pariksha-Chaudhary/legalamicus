{% extends "base.html" %}
{% block content %}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-6">

            <div class="card shadow-lg border-0" style="background:#ffffff; border-radius:15px;">
                <div class="card-body p-5 text-center text-dark">

                    <h3 class="fw-bold text-warning mb-3">
                        Confirm Your Consultation
                    </h3>

                    <hr style="border-color:#444;">

                    <h5 class="mb-2">
                        Lawyer: <span class="text-warning">{{ lawyer.user.username }}</span>
                    </h5>

                    <p class="text-muted">
                        Category: {{ lawyer.category }}
                    </p>

                    <h4 class="fw-bold text-warning my-4">
                        â‚¹{{ amount }}
                    </h4>

                    <p class="small text-secondary">
                        Secure payment powered by Razorpay
                    </p>

                    <button id="rzp-button1" class="btn gold-btn w-100 py-2 mt-3">
                        Pay Now
                    </button>

                </div>
            </div>

        </div>
    </div>
</div>


<!-- Razorpay Script -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
var options = {
    "key": "{{ razorpay_key }}",
    "amount": "{{ amount|floatformat:0 }}00",
    "currency": "INR",
    "name": "LegalAmicus",
    "description": "Consultation with {{ lawyer.user.username }}",
    "order_id": "{{ order_id }}",

    "method": {
        "upi": true,
        "card": true,
        "netbanking": true,
        "wallet": true
    },

    "handler": function (response){
        window.location.href =
        "/payment-success/{{ lawyer.id }}/" +
        "?payment_id=" + response.razorpay_payment_id +
        "&order_id=" + response.razorpay_order_id +
        "&signature=" + response.razorpay_signature;
    },

    "theme": {
        "color": "#D4AF37"
    }
};

var rzp1 = new Razorpay(options);

document.getElementById('rzp-button1').onclick = function(e){
    rzp1.open();
    e.preventDefault();
}
</script>

{% endblock %}
